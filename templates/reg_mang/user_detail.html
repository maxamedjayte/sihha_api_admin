{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container-fluid">

    <br>
    <div class="row">
        <div class="col-12">
            <div class="card">

                <div class="card-body">
                    <div class="dastyle-profile">
                        <div class="row">
                            <div class="col-lg-4 align-self-center mb-3 mb-lg-0">
                                <div class="dastyle-profile-main">
                                    <div class="dastyle-profile-main-pic">
                                        {% if userInfo.profileImage %}
                                        <img src="{{userInfo.profileImage.url}}" alt="" height="110"
                                            class="rounded-circle">
                                        {% endif %}
                                        <span class="dastyle-profile_main-pic-change">
                                            <i class="fas fa-camera"></i>
                                        </span>
                                    </div>
                                    <div class="dastyle-profile_user-detail">
                                        <h5 class="dastyle-user-name">{{userInfo.fullName}}</h5>
                                        <p class="mb-0 dastyle-user-name-post">Da'da {{userInfo.age}}</p>
                                    </div>
                                </div>
                            </div><!--end col-->

                            <div class="col-lg-4 ml-auto align-self-center">
                                <ul class="list-unstyled personal-detail mb-0">
                                    <li class=""><i class="las la-phone mr-2 text-secondary font-22 align-middle"></i>
                                        <b> phone </b> : {{userInfo.number}}
                                    </li>
                                    <li class="mt-2"><i
                                            class="las la-envelope text-secondary font-22 align-middle mr-2"></i> <b>
                                            Magaalada </b> :{{userInfo.city}}</li>
                                    <li class="mt-2"><i
                                            class="las la-globe text-secondary font-22 align-middle mr-2"></i> <b>
                                            NoocaUserka </b> : {% if userInfo.isSubscribedUser %}
                                        Macaamiil
                                        {% else %}
                                        User Caadi ah
                                        {% endif %}
                                    </li>
                                </ul>

                            </div><!--end col-->
                            <div class="col-lg-4 ml-auto align-self-center">
                                <ul class="list-unstyled personal-detail mb-0">
                                    <li class=""><i class="las la-phone mr-2 text-secondary font-22 align-middle"></i>
                                        <b> Rukun-From </b> : {{userInfo.latestSbscriptionDateFrom}}
                                    </li>
                                    <li class="mt-2"><i
                                            class="las la-envelope text-secondary font-22 align-middle mr-2"></i> <b>
                                            Rukun-To </b> : {{userInfo.latestSbscriptionDateTo}}</li>
                                    <li class="mt-2"><i
                                            class="las la-globe text-secondary font-22 align-middle mr-2"></i> <b>
                                            Rukun Active </b> : {% if userInfo.subscriptionActive %}
                                        Haa
                                        {% else %}
                                        Maya
                                        {% endif %}
                                    </li>
                                </ul>

                            </div><!--end col-->
                        </div><!--end row-->
                    </div><!--end f_profile-->
                </div><!--end card-body-->
            </div> <!--end card-->

            <div class="row">
                <div class="col-3">
                    <form class="custom-validation" id="sendMessage">

                        <div class="card">
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Numberka Shaqsiga</label>
                                    <input type="number" name="number" class="form-control" required
                                        placeholder="+252 61 00 00 00">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ku Qor Fariinta Halkaan</label>
                                    <div>
                                        <textarea name="fariinta_message" required class="form-control"
                                            rows="5"></textarea>
                                    </div>
                                </div>
                                <div class="mb-0">
                                    <div>
                                        <button type="submit" class="btn btn-pink waves-effect waves-light me-1">
                                            Submit
                                        </button>
                                        <button type="reset" class="btn btn-secondary waves-effect">
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>

                <div class="col-9">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">RUKUMASHADA DHAQTARKA</h4>
                            <p class="text-muted mb-0">A <code> &lt;caption&gt; </code>
                                functions like a heading for a table.
                                It helps users with screen readers to find a table and understand
                                what it‚Äôs about and decide if they want to read it.
                            </p>
                        </div><!--end card-header-->
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped mb-0">
                                    <caption>List of users</caption>
                                    <thead class="thead-dark">
                                        <tr>
                                            <td>ID</td>
                                            <td>Nuuca Buukinka</td>
                                            <td>Waqtiga Userka</td>
                                            <td>Waqtiga Loo Qabtay</td>
                                            <td>Status</td>

                                            <td>Linkiga</td>
                                            <td>---</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for appoint in doctorAppointments %}
                                        <tr>
                                            <td>{{appoint.id}}</td>
                                            <td>
                                                <a href="#" class="fw-medium text-dark">
                                                    <h6>{{appoint.theCategory.categoryName}}</h6>
                                                    {{appoint.theCategory.meetinTime}}
                                                </a>
                                            </td>
                                            <td>{{appoint.userAssignedDated}}</td>
                                            <td>{{appoint.doctorAssignedDated}}</td>
                                            <td>
                                                {% if appoint.sessionEnded %}
                                                <strong>DHAMAADAY</strong>
                                                {% else %}
                                                <strong>AAN - DHAMAANIN</strong>

                                                {% endif %}
                                            </td>
                                            <td>{{appoint.appointmentMeetingLink}}</td>
                                            <td>

                                                <button type="button" class="btn btn-outline-primary btn-sm"
                                                    data-toggle="modal"
                                                    data-target="#exampleModalLarge{{appoint.id}}">Waqti
                                                    siin
                                                </button>
                                                <button type="button"
                                                    class="btn btn-danger waves-effect waves-light btn-sm">CANCEL
                                                </button>



                                            </td>
                                        </tr>

                                        <div class="modal fade bd-example-modal-lg" id="exampleModalLarge{{appoint.id}}"
                                            tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
                                            aria-hidden="true">
                                            <div class="modal-dialog modal-lg" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h6 class="modal-title m-0" id="myLargeModalLabel">WAQTI SINT
                                                            AUSERKA</h6>
                                                        <button type="button" class="close " data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true"><i class="la la-times"></i></span>
                                                        </button>
                                                    </div><!--end modal-header-->
                                                    <form id="updatingDataForm">
                                                        <div class="modal-body">
                                                            <div class="col-12">
                                                                <label for="validationCustomUsername"
                                                                    class="form-label">Linkiga
                                                                    Ballanka</label>
                                                                <input class="form-control"
                                                                    name="appointmentMeetingLink"
                                                                    value="{{appoint.appointmentMeetingLink}}"
                                                                    type="text" required placeholder="https://"
                                                                    id="example-datetime-local-input">
                                                                <input type="hidden" name="appointmentId"
                                                                    value="{{appoint.id}}" id="appointmentId">

                                                            </div>
                                                            <div class="col-12">
                                                                <label for="validationCustomUsername"
                                                                    class="form-label">Waqtiga
                                                                    Balanka</label>
                                                                <input class="form-control" name="doctorAssignedDated"
                                                                    value="{{appoint.doctorAssignedDated|date:'Y-m-d H:i'}}"
                                                                    type="datetime-local" required
                                                                    placeholder="12:45:00 PM"
                                                                    id="example-datetime-local-input">
                                                            </div>



                                                        </div><!--end modal-body-->
                                                        <div class="modal-footer" id="appointmentFooter">
                                                            <button type="button" class="btn btn-secondary btn-sm"
                                                                data-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-primary">Save
                                                                changes</button>
                                                        </div><!--end modal-footer-->
                                                    </form>
                                                </div><!--end modal-content-->
                                            </div><!--end modal-dialog-->
                                        </div><!--end modal-->



                                        {% endfor %}
                                    </tbody>
                                </table><!--end /table-->
                            </div><!--end /tableresponsive-->
                        </div><!--end card-body-->
                    </div><!--end card-->
                </div>
            </div>

        </div><!--end col-->
    </div><!--end row-->
    <div class="pb-4">
        <ul class="nav-border nav nav-pills mb-0" id="pills-tab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="Profile_Post_tab" data-toggle="pill" href="#Profile_Post">Xog Userka</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="portfolio_detail_tab" data-toggle="pill"
                    href="#Profile_Portfolio">RUKUMASHADA</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="settings_detail_tab" data-toggle="pill" href="#Profile_Settings">DALABKA </a>
            </li>
        </ul>
    </div><!--end card-body-->
    <div class="row">
        <div class="col-12">
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="Profile_Post" role="tabpanel"
                    aria-labelledby="Profile_Post_tab">
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="card">
                                        <div class="card-body  report-card">
                                            <div class="row d-flex justify-content-center">
                                                <div class="col">
                                                    <p class="text-dark mb-1 font-weight-semibold">Tirada Caruurta</p>
                                                    <h3 class="my-2 font-24 font-weight-bold">{{childCounts}}</h3>
                                                </div>
                                                <div class="col-auto align-self-center">
                                                    <div class="report-main-icon bg-light-alt">
                                                        <i data-feather="eye"
                                                            class="align-self-center text-muted icon-md"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!--end card-body-->
                                    </div> <!--end card-->
                                </div><!--end col-->
                                <div class="col-lg-4">
                                    <div class="card">
                                        <div class="card-body  report-card">
                                            <div class="row d-flex justify-content-center">
                                                <div class="col">
                                                    <p class="text-dark mb-1 font-weight-semibold">Tirada Dalabaadka</p>
                                                    <h3 class="my-2 font-24 font-weight-bold">
                                                        {{userOrderedProducts.count}}</h3>
                                                    <!-- <p class="mb-0 text-truncate text-muted">üëç <span
                                                            class="text-dark font-weight-semibold">854</span> New Like
                                                        this week</p> -->
                                                </div>
                                                <div class="col-auto align-self-center">
                                                    <div class="report-main-icon bg-light-alt">
                                                        <i data-feather="message-square"
                                                            class="align-self-center text-muted icon-md"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!--end card-body-->
                                    </div> <!--end card-->
                                </div><!--end col-->
                                <div class="col-lg-4">
                                    <div class="card">
                                        <div class="card-body  report-card">
                                            <div class="row d-flex justify-content-center">
                                                <div class="col">
                                                    <p class="text-dark mb-1 font-weight-semibold">Tirada Bookinkinada
                                                    </p>
                                                    <h3 class="my-2 font-24 font-weight-bold">
                                                        {{doctorAppointments.count}}</h3>
                                                    <!-- <p class="mb-0 text-truncate text-muted">üëç <span
                                                            class="text-dark font-weight-semibold">854</span> New Like
                                                        this week</p> -->
                                                </div>
                                                <div class="col-auto align-self-center">
                                                    <div class="report-main-icon bg-light-alt">
                                                        <i data-feather="message-square"
                                                            class="align-self-center text-muted icon-md"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!--end card-body-->
                                    </div> <!--end card-->
                                </div><!--end col-->
                            </div><!--end row-->

                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">Baaritaanka Cudurada</h4>
                                    <p class="text-muted mb-0">XOGTA JAWAABISTA USERKA <code>.table</code> to any
                                        <code>&lt;table&gt;</code>.
                                    </p>
                                </div><!--end card-header-->
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table mb-0 table-centered">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>NuucaCudurka</th>
                                                    <th>SAXAY</th>
                                                    <th>KHALDAY</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for answerInfo in userAnswerInformation %}
                                                <tr>
                                                    <td> {{answerInfo.id}}</td>
                                                    <td><span class="badge badge-soft-gray">
                                                            {{answerInfo.thePorbQuestionCategory.name}}</span></td>
                                                    <td> {{answerInfo.trueAnswers}}</td>
                                                    <td> {{answerInfo.falseAnswers}}</td>
                                                </tr>
                                                {% endfor %}


                                            </tbody>
                                        </table><!--end /table-->
                                    </div><!--end /tableresponsive-->
                                </div><!--end card-body-->
                            </div><!--end card-->
                            <br>
                            <div class="card">
                                <div class="p-4 pb-0">
                                    <h5 class="card-title mb-0">Xogta Caruurtaada</h5>
                                </div>
            
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table align-middle table-nowrap mb-0">
                                            <thead style="background-color: #273746;color:white;">
                                                <td>ID</td>
                                                <td>Magaca</td>
                                                <td>Qaybta</td>
                                                <td>Saxay</td>
                                                <td>Khalday</td>
                                            </thead>
                                            <tbody>
                                                {% for myChild in myChilds %}
                                                <tr>
                                                    <td>{{myChild.id}}</td>
                                                    <td>
                                                        <a href="#" class="fw-medium text-dark">
                                                            <h6>{{myChild.theChild}}</h6>
                                                            <span class="fs-6">{{myChild.theUser.fullName}}</span>
                                                        </a>
                                                    </td>
                                                    <td>{{myChild.thePorbQuestionCategory.name}}</td>
                                                    <td>{{myChild.trueAnswers}}</td>
                                                    <td>{{myChild.falseAnswers}}</td>
            
                                                </tr>
            
                                                {% endfor %}
            
            
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div> <!-- end card -->
                        </div><!--end col-->
                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-header">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <h4 class="card-title">KA JAWAABISTA SU'ALAHA</h4>
                                        </div><!--end col-->
                                        <div class="col-auto">
                                            <div class="dropdown">
                                                <a href="#" class="btn btn-sm btn-outline-light dropdown-toggle"
                                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                    Today<i class="las la-angle-down ml-1"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right">
                                                    <a class="dropdown-item" href="#">Today</a>
                                                    <a class="dropdown-item" href="#">Yesterday</a>
                                                    <a class="dropdown-item" href="#">Last Week</a>
                                                </div>
                                            </div>
                                        </div><!--end col-->
                                    </div> <!--end row-->
                                </div><!--end card-header-->
                                {% if userInfo.isSubscribedUser %}
                                <div class="card-body">
                                    <ul class="list-group custom-list-group mb-n3">
                                        {% for probAns in userProbAnswers %}
                                        <li class="list-group-item align-items-center d-flex justify-content-between">
                                            <div class="media">

                                                <div class="media-body align-self-center">
                                                    <a href="#"
                                                        class="m-0 d-block font-weight-semibold font-13">{{probAns.theProbQuestion.som}}</a>
                                                    {% if probAns.answer %}
                                                    <a href="#" class="font-12 text-primary">
                                                        HAA
                                                    </a>
                                                    {% else %}
                                                    <a href="#" class="font-12 text-warning">
                                                        MAYA
                                                    </a>
                                                    {% endif %}

                                                </div><!--end media body-->
                                            </div>
                                            <div class="align-self-center">
                                                <!-- <span class="text-muted mb-n2">20 June</span> -->
                                            </div>
                                        </li>
                                        {% endfor %}

                                    </ul>
                                </div><!--end card-body-->
                                {% endif %}
                            </div><!--end card-->


                        </div><!--end col-->
                    </div><!--end row-->
                </div>


                <div class="tab-pane fade" id="Profile_Portfolio" role="tabpanel"
                    aria-labelledby="portfolio_detail_tab">

                    <div class="row">

                        <div class="col-lg-0">

                        </div>
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">ADKAARTA URUKUMAN USERKAAN</h4>
                                    <p class="text-muted mb-0">
                                        Use <code>.table-striped</code> to add zebra-striping to any table row
                                        within the <code>&lt;tbody&gt;</code>.
                                    </p>
                                </div><!--end card-header-->
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped mb-0">
                                            <thead class="thead-dark">
                                                <tr>
                                                    <th>#</th>
                                                    <th>MAGACA</th>
                                                    <th>TIRO</th>
                                                    <th>QORAAL</th>
                                                    <th>WAQTIGA</th>
                                                    <!-- <th class="text-right">Action</th> -->
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for adkarWithTalo in userInfo.userMatchedAdkarWithTalo.all %}
                                                <tr>
                                                    <td style="font-weight: bold;">{{adkarWithTalo.id}}</td>
                                                    <td>{{adkarWithTalo.name}}</td>
                                                    <td>{{adkarWithTalo.readingCount}}</td>
                                                    <td><button type="button" class="btn btn-primary"
                                                            data-toggle="modal" data-target="#aragAdkaar">ARAG
                                                            {{adkarWithTalo.type}}</button></td>
                                                    <td>
                                                        {% for rtTime in adkarWithTalo.readingTime.all %}
                                                        {% if forloop.first %}
                                                        <span
                                                            class="badge badge-soft-success font-size-12">{{rtTime.name}}</span>
                                                        {% elif forloop.last %}
                                                        <span
                                                            class="badge badge-soft-info font-size-12">{{rtTime.name}}</span>
                                                        {% else %}
                                                        <span
                                                            class="badge badge-soft-warning font-size-12">{{rtTime.name}}</span>
                                                        {% endif %}
                                                        {% endfor %}
                                                        <!-- </td>
                                                            <td><button type="button"  class="btn btn-primary"></button> &nbsp;<button type="button" class="btn btn-danger"></button></td>
                                                        </tr> -->
                                                        <!-- sample modal content -->
                                                        <!-- sample modal content -->
                                                        <div class="modal fade" id="aragAdkaar" tabindex="-1"
                                                            role="dialog" aria-labelledby="exampleModalDefaultLabel"
                                                            aria-hidden="true">
                                                            <div class="modal-dialog" role="document">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title mt-0" id="myModalLabel">
                                                                            {% if adkarWithTalo.voice %}
                                                                            <audio controls>
                                                                                <source
                                                                                    src="{{adkarWithTalo.voice.url}}"
                                                                                    type="audio/ogg">
                                                                            </audio>
                                                                            {% else %}
                                                                            COD UMA DIIWAAN GASHANA

                                                                            {% endif %}
                                                                        </h5>
                                                                        <button type="button" class="close "
                                                                            data-dismiss="modal" aria-label="Close">
                                                                            <span aria-hidden="true"><i
                                                                                    class="la la-times"></i></span>
                                                                        </button>
                                                                    </div><!--end modal-header-->
                                                                    <div class="modal-body">
                                                                        <p style="width: auto;">
                                                                            {{adkarWithTalo.text}}
                                                                        </p>

                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button"
                                                                            class="btn btn-secondary btn-sm"
                                                                            data-dismiss="modal">Close</button>

                                                                    </div><!--end modal-footer-->
                                                                </div><!--end modal-content-->
                                                            </div><!--end modal-dialog-->
                                                        </div><!--end modal-->
                                                        <div id="myModal" class="modal fade" tabindex="-1"
                                                            aria-labelledby="myModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title mt-0" id="myModalLabel">
                                                                            {% if adkarWithTalo.voice %}
                                                                            <audio controls>
                                                                                <source
                                                                                    src="{{adkarWithTalo.voice.url}}"
                                                                                    type="audio/ogg">
                                                                            </audio>
                                                                            {% else %}
                                                                            COD UMA DIIWAAN GASHANA

                                                                            {% endif %}
                                                                        </h5>
                                                                        <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <p style="width: auto;">
                                                                            {{adkarWithTalo.text}}
                                                                        </p>

                                                                    </div>

                                                                </div><!-- /.modal-content -->
                                                            </div><!-- /.modal-dialog -->
                                                        </div><!-- /.modal -->
                                                        {% endfor %}

                                            </tbody>
                                        </table><!--end /table-->
                                    </div><!--end /tableresponsive-->
                                </div><!--end card-body-->
                            </div><!--end card-->
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">DAAWOOYINKA UGODAN</h4>
                                    <p class="text-muted mb-0">
                                        Use <code>.table-striped</code> to add zebra-striping to any table row
                                        within the <code>&lt;tbody&gt;</code>.
                                    </p>
                                </div><!--end card-header-->
                                <div class="card-body row">
                                    {% for usrProduct in bugProducts %}
                                    <div class="col-lg-6 col-md-6 hover" data-toggle="modal"
                                        data-target="#userBugProduct{{usrProduct.id}}" style="cursor:pointer;">

                                        <div class="card">
                                            <img class="" src="{{usrProduct.theProduct.image1.url}}"
                                                alt="Card image cap">
                                            <div class="py-2 text-center">
                                                <a href=""
                                                    class="text-muted fw-bold">{{usrProduct.theProduct.category.name}}<i
                                                        class="dripicons-download ml-1"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal fade bd-example-modal-lg" id="userBugProduct{{usrProduct.id}}"
                                        tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog modal-lg" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h6 class="modal-title m-0" id="myLargeModalLabel">WAXQTI SIINTA
                                                        <strong>{{usrProduct.theProduct.name}}</strong>
                                                    </h6>
                                                    <button type="button" class="close " data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true"><i class="la la-times"></i></span>
                                                    </button>
                                                </div><!--end modal-header-->

                                                <form id="productRoutineForm">
                                                    <input type="hidden" name="theUser" value="{{userInfo.pk}}">
                                                    <input type="hidden" name="theProduct"
                                                        value="{{usrProduct.theProduct.pk}}">
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <div class="col-6">
                                                                <label for="example-date-input">From Date</label>
                                                                <input class="form-control" type="date" name="fromDate"
                                                                    placeholder="2011-08-19" required
                                                                    id="example-date-input">
                                                            </div>
                                                            <div class="col-6">
                                                                <label for="example-date-input">To Date</label>
                                                                <input class="form-control" required type="date"
                                                                    name="toDate" placeholder="2011-08-19"
                                                                    id="example-date-input">
                                                            </div>
                                                        </div>
                                                        <br>
                                                        <div class="col-sm-10">
                                                            <label for="example-date-input">Waqtiga</label>
                                                            <select class="select2 form-control mb-3 custom-select"
                                                                name="usageTimes" multiple
                                                                aria-label="Default select example">
                                                                {% for routineTime in routineTimes %}
                                                                <option value="{{routineTime.pk}}">
                                                                    {{routineTime.name}} -
                                                                    <span>{{routineTime.fromTime}}
                                                                </option>

                                                                {% endfor %}
                                                            </select>
                                                        </div>


                                                    </div><!--end modal-body-->
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary btn-sm"
                                                            data-dismiss="modal">Close</button>
                                                        <button type="submit"
                                                            class="btn btn-primary btn-md">Save</button>
                                                    </div><!--end modal-footer-->
                                                </form>

                                            </div><!--end modal-content-->
                                        </div><!--end modal-dialog-->
                                    </div><!--end modal-->


                                    {% empty %}
                                    <h6 style="font-size: small;">
                                        <center>Majiraan Wax Products ah</center>
                                    </h6>
                                    {% endfor %}
                                </div>

                            </div>
                        </div>

                        <div class="col-lg-8">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">DAAWOOYINKA RUKUNKA AH</h4>
                                    <p class="text-muted mb-0">
                                        Use <code>.table-striped</code> to add zebra-striping to any table row
                                        within the <code>&lt;tbody&gt;</code>.
                                    </p>
                                </div><!--end card-header-->
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover mb-0">
                                            <thead class="thead-dark">
                                                <tr>
                                                    <th>#ID</th>
                                                    <th>Daawada</th>
                                                    <th>Ka-BI</th>
                                                    <th>Ku-EG</th>
                                                    <th>Waqtiga Isticmaalka</th>
                                                    <th>#</th>
                                                    <th class="text-right">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for usrProductRoutine in userProductsRoutine %}
                                                {% if usrProductRoutine.isRoutine %}
                                                <tr>
                                                    <td style="width: 60px;">
                                                        <img src="{{usrProductRoutine.theProduct.image1.url}}" alt=""
                                                            class="rounded-circle thumb-xs mr-1">
                                                    </td>
                                                    <td>
                                                        <a href="#" class="fw-medium text-dark">

                                                            <h6>{{usrProductRoutine.theProduct.name}}</h6>
                                                            {{usrProductRoutine.theProduct.category.name}}
                                                        </a>
                                                    </td>
                                                    <td>
                                                        {{usrProductRoutine.fromDate}}
                                                    </td>
                                                    <!-- <td>
                                                                <p class="ml-4 text-muted mb-0">
                                                                    <i class="mdi mdi-comment-outline align-middle text-muted font-size-16 me-1"></i>
                                                                    6
                                                                </p>
                                                            </td> -->
                                                    <td>
                                                        <p class="ml-4 mb-0">{{usrProductRoutine.toDate}}</p>
                                                    </td>
                                                    <td>
                                                        {% for rtTime in usrProductRoutine.usageTimes.all %}
                                                        {% if forloop.first %}
                                                        <span
                                                            class="badge badge-soft-success font-size-12">{{rtTime.name}}</span>
                                                        {% elif forloop.last %}
                                                        <span
                                                            class="badge badge-soft-info font-size-12">{{rtTime.name}}</span>
                                                        {% else %}
                                                        <span
                                                            class="badge badge-soft-warning font-size-12">{{rtTime.name}}</span>
                                                        {% endif %}
                                                        {% endfor %}
                                                    </td>
                                                    <td>

                                                    </td>
                                                    <td>
                                                        <button type="button" class="btn btn-outline-primary btn-sm"
                                                            data-toggle="modal"
                                                            data-target="#usrProductRoutine{{usrProductRoutine.pk}}">Waqti
                                                            siin
                                                        </button>
                                                    </td>


                                                </tr>
                                                <div class="modal fade bd-example-modal-lg"
                                                    id="usrProductRoutine{{usrProductRoutine.pk}}" tabindex="-1"
                                                    role="dialog" aria-labelledby="myLargeModalLabel"
                                                    aria-hidden="true">
                                                    <div class="modal-dialog modal-lg" role="document">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h6 class="modal-title m-0" id="myLargeModalLabel">
                                                                    WAXQTI SIINTA
                                                                    <strong>{{usrProductRoutine.theProduct.name}}</strong>
                                                                </h6>
                                                                <button type="button" class="close "
                                                                    data-dismiss="modal" aria-label="Close">
                                                                    <span aria-hidden="true"><i
                                                                            class="la la-times"></i></span>
                                                                </button>
                                                            </div><!--end modal-header-->

                                                            <form id="productRoutineChangeForm">
                                                                <input type="hidden" name="theUser"
                                                                    value="{{userInfo.pk}}">
                                                                <input type="hidden" name="theProduct"
                                                                    value="{{usrProductRoutine.theProduct.pk}}">
                                                                <div class="modal-body">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <label for="example-date-input">From
                                                                                Date</label>
                                                                            <input class="form-control" type="date"
                                                                                name="fromDate"
                                                                                value="{{usrProductRoutine.fromDate|date:'Y-m-d'}}"
                                                                                placeholder="2011-08-19" required
                                                                                id="example-date-input">
                                                                        </div>
                                                                        <div class="col-6">
                                                                            <label for="example-date-input">To
                                                                                Date</label>
                                                                            <input class="form-control" required
                                                                                type="date"
                                                                                value="{{usrProductRoutine.toDate|date:'Y-m-d'}}"
                                                                                name="toDate" placeholder="2011-08-19"
                                                                                id="example-date-input">
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="col-sm-10">
                                                                        <label for="example-date-input">Waqtiga</label>
                                                                        <select
                                                                            class="select2 form-control mb-3 custom-select"
                                                                            multiple name="usageTimes"
                                                                            aria-label="Default select example">
                                                                            {% for routineTime in routineTimes %}
                                                                            <option value="{{routineTime.pk}}">
                                                                                {{routineTime.name}} -
                                                                                <span>{{routineTime.fromTime}}
                                                                            </option>

                                                                            {% endfor %}
                                                                        </select>
                                                                    </div>


                                                                </div><!--end modal-body-->
                                                                <div class="modal-footer">
                                                                    <button type="button"
                                                                        class="btn btn-secondary btn-sm"
                                                                        data-dismiss="modal">Close</button>
                                                                    <button type="submit"
                                                                        class="btn btn-primary btn-md">Save</button>
                                                                </div><!--end modal-footer-->
                                                            </form>

                                                        </div><!--end modal-content-->
                                                    </div><!--end modal-dialog-->
                                                </div><!--end modal-->



                                                {% endif %}

                                                {% endfor %}

                                            </tbody>
                                        </table><!--end /table-->
                                    </div><!--end /tableresponsive-->
                                </div><!--end card-body-->
                            </div><!--end card-->
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="Profile_Settings" role="tabpanel" aria-labelledby="settings_detail_tab">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-body  report-card">
                                    <div class="row d-flex justify-content-center">
                                        <div class="col">
                                            <p class="text-dark mb-1 font-weight-semibold">Dalabaadka Cusub</p>
                                            <h3 class="my-2 font-24 font-weight-bold">{{unTakedOrders.count}}</h3>
                                        </div>
                                        <div class="col-auto align-self-center">
                                            <div class="report-main-icon bg-light-alt">
                                                <i data-feather="eye" class="align-self-center text-muted icon-md"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div><!--end card-body-->
                            </div> <!--end card-->
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-body  report-card">
                                    <div class="row d-flex justify-content-center">
                                        <div class="col">
                                            <p class="text-dark mb-1 font-weight-semibold">Dalabaadka La Helay</p>
                                            <h3 class="my-2 font-24 font-weight-bold">
                                                {{completeOrders.count}}</h3>
                                            <!-- <p class="mb-0 text-truncate text-muted">üëç <span
                                                    class="text-dark font-weight-semibold">854</span> New Like
                                                this week</p> -->
                                        </div>
                                        <div class="col-auto align-self-center">
                                            <div class="report-main-icon bg-light-alt">
                                                <i data-feather="message-square"
                                                    class="align-self-center text-muted icon-md"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div><!--end card-body-->
                            </div> <!--end card-->
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-body  report-card">
                                    <div class="row d-flex justify-content-center">
                                        <div class="col">
                                            <p class="text-dark mb-1 font-weight-semibold">Dhamman Dalabaadka
                                            </p>
                                            <h3 class="my-2 font-24 font-weight-bold">
                                                {{userOrderedProducts.count}}</h3>
                                            <!-- <p class="mb-0 text-truncate text-muted">üëç <span
                                                    class="text-dark font-weight-semibold">854</span> New Like
                                                this week</p> -->
                                        </div>
                                        <div class="col-auto align-self-center">
                                            <div class="report-main-icon bg-light-alt">
                                                <i data-feather="message-square"
                                                    class="align-self-center text-muted icon-md"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div><!--end card-body-->
                            </div> <!--end card-->
                        </div><!--end col-->
                    </div><!--end row-->
                    
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">DALABAADLA USERKAAN</h4>
                                    <p class="text-muted mb-0">DataTables has most features enabled by
                                        default, so all you need to do to use it with your own tables is to call
                                        the construction function: <code>$().DataTable();</code>.
                                    </p>
                                </div><!--end card-header-->
                                <div class="card-body">
                                    <table id="datatable" class="table table-bordered dt-responsive nowrap"
                                        style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                        <thead class="thead-dark">
                                            <tr>
                                                <th>#</th>
                                                <th>BADEECADA</th>
                                                <th>HABKA</th>
                                                <th>TIRADA</th>
                                                <th>WAQTIGA</th>
                                                <th>XAALADA</th>
                                                <th>HELAY</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for usrProduct in userOrderedProducts %}
                                                    <tr>
                                                        <td style="font-weight: bold;">{{usrProduct.id}}</td>
                                                        <td>{{usrProduct.theProductInfo.name}}</td>
                                                        <td>{{usrProduct.paymentMethod}}</td>
                                                        <td>{{usrProduct.quantity}}</td>
                                                        <td>{{usrProduct.orderTime}}</td>
                                                        <td>{{usrProduct.status}}</td>
                                                        {% if usrProduct.userTaked %}
                                                        <td>Haa</td>
                                                        {% else %}
                                                        <td>Maya</td>
                                                        {% endif %}
                                                        <!-- <td>{{adkarWithTalo.readingTime}}</td>
                                                <td><button type="button" onclick="updateAdkarWithTalo('{{adkarWithTalo.pk}}')" class="btn btn-primary"></button> &nbsp;<button type="button" onclick="delAdkarWithTalo('{{adkarWithTalo.pk}}')" class="btn btn-danger"></button></td> -->
                                                    </tr>
                                                    <!-- sample modal content -->

                                                    {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div><!-- container -->
<script>
    function assingTimeAndLink(params) {
        console.log('first')
    }

    document.getElementById('updatingDataForm').addEventListener('submit', function updatingDataForm(e) {
        e.preventDefault();
        isLoading=true;
        if (isLoading) {
            document.getElementById('appointmentFooter').innerHTML=`
                <button class="btn btn-primary" type="button" disabled>
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span><span class="sr-only">Loading...</span>
                </button>
                <button class="btn btn-primary" type="button" disabled>
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    Loading...
                </button>                                                         
            </div>
            
            `
        }
        var formData = new FormData(e.target);
        var appointmentId = $('[name=appointmentId]').val()
        console.log(formData)
        console.log(appointmentId)
        $.ajax({
            type: "POST",
            data: formData,
            headers: { 'X-CSRFToken': getCookie('csrftoken') },
            url: `/api/doctorAppointment-update/${appointmentId}/`,
            cache: false,
            contentType: false,
            processData: false,
            success: async function (updatedResp) {
                console.log(updatedResp)
                if (updatedResp.status == 'success') {
                    swal("Waa lagu guulaystay Badalidda Xogta", {
                        icon: "success"
                    });
                    $('.modal').modal('hide');
                    location.reload()
                }
            },
            error: function (respErr) {

            }
        })
    })


    document.getElementById('productRoutineForm').addEventListener('submit', async function (e) {
        e.preventDefault()
        theProduct = $("[name=theProduct]").val()
        theUser = $("[name=theUser]").val()
        var formData = new FormData(this)
        console.log(theUser)
        formData.append('isRoutine', true)
        await fetch('/api/checkRoutineProductForThisUser-exist/' + theProduct + '/' + theUser + '/').then((resp) => resp.json()).then(async function (respData) {
            console.log(respData)
            if (respData.exist) {
                await $.ajax({
                    type: "POST",
                    data: formData,
                    headers: { 'X-CSRFToken': getCookie('csrftoken') },
                    url: '/api/userProductsRoutine-update/' + respData.data.id + '/',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: async function (updatedResp) {
                        console.log(updatedResp)
                        if (updatedResp.status == 'success') {
                            swal("Waa labadalay xogta Productiga", {
                                icon: "success"
                            });
                            // document.getElementById('userUdateForm').reset()
                            // $('#productRoutineForm').modal('hide');
                            location.reload()
                        }
                    },
                    error: function (respErr) {

                    }
                })
            } else {
                await $.ajax({
                    type: "POST",
                    data: formData,
                    headers: { 'X-CSRFToken': getCookie('csrftoken') },
                    url: '/api/userProductsRoutine-create/',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: async function (updatedResp) {
                        console.log(updatedResp)
                        if (updatedResp.status == 'success') {
                            swal("Waa la diiwaangaliyay xogta Productiga", {
                                icon: "success"
                            });
                            // document.getElementById('userUdateForm').reset()
                            // $('#productRoutineForm').modal('hide');
                            location.reload()
                        }
                    },
                    error: function (respErr) {

                    }
                })
            }
        })
    })

    document.getElementById('productRoutineChangeForm').addEventListener('submit', async function (e) {
        e.preventDefault()
        theProduct = $("[name=theProduct]").val()
        theUser = $("[name=theUser]").val()
        var formData = new FormData(this)
        console.log(theUser)
        formData.append('isRoutine', true)
        await fetch('/api/checkRoutineProductForThisUser-exist/' + theProduct + '/' + theUser + '/').then((resp) => resp.json()).then(async function (respData) {
            console.log(respData)
            if (respData.exist) {
                await $.ajax({
                    type: "POST",
                    data: formData,
                    headers: { 'X-CSRFToken': getCookie('csrftoken') },
                    url: '/api/userProductsRoutine-update/' + respData.data.id + '/',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: async function (updatedResp) {
                        console.log(updatedResp)
                        if (updatedResp.status == 'success') {
                            swal("Waa labadalay xogta Productiga", {
                                icon: "success"
                            });
                            // document.getElementById('userUdateForm').reset()
                            // $('#productRoutineForm').modal('hide');
                            location.reload()
                        }
                    },
                    error: function (respErr) {

                    }
                })
            } else {
                await $.ajax({
                    type: "POST",
                    data: formData,
                    headers: { 'X-CSRFToken': getCookie('csrftoken') },
                    url: '/api/userProductsRoutine-create/',
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: async function (updatedResp) {
                        console.log(updatedResp)
                        if (updatedResp.status == 'success') {
                            swal("Waa la diiwaangaliyay xogta Productiga", {
                                icon: "success"
                            });
                            // document.getElementById('userUdateForm').reset()
                            // $('#productRoutineForm').modal('hide');
                            location.reload()
                        }
                    },
                    error: function (respErr) {

                    }
                })
            }
        })
    })

</script>
{% endblock %}